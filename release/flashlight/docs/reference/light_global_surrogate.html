<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Global Surrogate Tree — light_global_surrogate • flashlight</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Global Surrogate Tree — light_global_surrogate" />
<meta property="og:description" content="Model predictions are modelled by a single decision tree, serving as an easy to interprete surrogate to the original model. As suggested in Molnar (see reference below), the quality of the surrogate tree can be measured by its R-squared." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flashlight</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/flashlight.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/flashlight_caret.html">Using flashlight with caret</a>
    </li>
    <li>
      <a href="../articles/flashlight_h2o.html">Using flashlight with h2o</a>
    </li>
    <li>
      <a href="../articles/flashlight_mlr3.html">Using flashlight with mlr3</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mayer79/flashlight/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Global Surrogate Tree</h1>
    <small class="dont-index">Source: <a href='https://github.com/mayer79/flashlight/blob/master/R/light_global_surrogate.R'><code>R/light_global_surrogate.R</code></a></small>
    <div class="hidden name"><code>light_global_surrogate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Model predictions are modelled by a single decision tree, serving as an easy to interprete surrogate to the original model. As suggested in Molnar (see reference below), the quality of the surrogate tree can be measured by its R-squared.</p>
    </div>

    <pre class="usage"><span class='fu'>light_global_surrogate</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>light_global_surrogate</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for flashlight</span>
<span class='fu'>light_global_surrogate</span>(
  <span class='no'>x</span>,
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>data</span>,
  <span class='kw'>by</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>by</span>,
  <span class='kw'>v</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>use_linkinv</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>n_max</span> <span class='kw'>=</span> <span class='fl'>Inf</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>keep_max_levels</span> <span class='kw'>=</span> <span class='fl'>4</span>,
  <span class='kw'>label_name</span> <span class='kw'>=</span> <span class='st'>"label"</span>,
  <span class='kw'>tree_name</span> <span class='kw'>=</span> <span class='st'>"tree"</span>,
  <span class='no'>...</span>
)

<span class='co'># S3 method for multiflashlight</span>
<span class='fu'>light_global_surrogate</span>(<span class='no'>x</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An object of class <code>flashlight</code> or <code>multiflashlight</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to <code>rpart</code>, such as <code>maxdepth</code>.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>An optional <code>data.frame</code>.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>An optional vector of column names used to additionally group the results. For each group, a separate tree is grown.</p></td>
    </tr>
    <tr>
      <th>v</th>
      <td><p>Vector of variables used in the surrogate model. Defaults to all variables in <code>data</code> except "by", "w" and "y".</p></td>
    </tr>
    <tr>
      <th>use_linkinv</th>
      <td><p>Should retransformation function be applied? Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>n_max</th>
      <td><p>Maximum number of data rows to consider to build the tree.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>An integer random seed used to select data rows if <code>n_max</code> is lower than the number of data rows.</p></td>
    </tr>
    <tr>
      <th>keep_max_levels</th>
      <td><p>Number of levels of categorical and factor variables to keep. Other levels are combined to a level "Other". This prevents <code>rpart</code> to take too long to split non-numeric variables with many levels.</p></td>
    </tr>
    <tr>
      <th>label_name</th>
      <td><p>Column name in resulting <code>data</code> containing the label of the flashlight. Defaults to "label".</p></td>
    </tr>
    <tr>
      <th>tree_name</th>
      <td><p>Column name in resulting <code>data</code> containing the trees. Defaults to "tree".</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>light_global_surrogate</code>, <code>light</code> (and a list) with the following elements.</p><ul>
<li><p><code>data</code> A tibble with results. Can be used to build fully customized visualizations.</p></li>
<li><p><code>by</code> Same as input <code>by</code>.</p></li>
<li><p><code>label_name</code> Same as input <code>label_name</code>.</p></li>
<li><p><code>tree_name</code> Name of column with tree objects.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The size of the tree can be modified by passing <code>...</code> arguments to <code>rpart</code>.</p>
    <h2 class="hasAnchor" id="methods-by-class-"><a class="anchor" href="#methods-by-class-"></a>Methods (by class)</h2>

    
<ul>
<li><p><code>default</code>: Default method not implemented yet.</p></li>
<li><p><code>flashlight</code>: Surrogate model for a flashlight.</p></li>
<li><p><code>multiflashlight</code>: Surrogate model for a multiflashlight.</p></li>
</ul>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Molnar C. (2019). Interpretable Machine Learning.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='plot.light_global_surrogate.html'>plot.light_global_surrogate</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>fit1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>Sepal.Length</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>)
<span class='no'>fit2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>Sepal.Length</span> ~ <span class='no'>Petal.Length</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>)
<span class='no'>fl1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='flashlight.html'>flashlight</a></span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>fit1</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"full"</span>)
<span class='no'>fl2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='flashlight.html'>flashlight</a></span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>fit2</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"partial"</span>)
<span class='no'>fls</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='multiflashlight.html'>multiflashlight</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='no'>fl1</span>, <span class='no'>fl2</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='st'>"Sepal.Length"</span>)
<span class='fu'>light_global_surrogate</span>(<span class='no'>fls</span>, <span class='kw'>maxdepth</span> <span class='kw'>=</span> <span class='fl'>3</span>)</div><div class='output co'>#&gt; 
#&gt; I am an object with class(es) light_global_surrogate_multi, light_global_surrogate, light, list 
#&gt; 
#&gt; data.frames (maximum 6 rows shown):
#&gt; 
#&gt;  data 
#&gt; <span style='color: #555555;'># A tibble: 2 x 3</span><span>
#&gt;   label   r_squared tree   
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span> 
#&gt; </span><span style='color: #555555;'>1</span><span> full        0.923 </span><span style='color: #555555;'>&lt;rpart&gt;</span><span>
#&gt; </span><span style='color: #555555;'>2</span><span> partial     0.978 </span><span style='color: #555555;'>&lt;rpart&gt;</span><span></div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael Mayer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


